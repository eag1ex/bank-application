{"version":3,"names":[],"mappings":"","sources":["fileupload.service.js"],"sourcesContent":["var app;\n(function (app) {\n    var fileupload;\n    (function (fileupload) {\n        'use strict';\n        var Fileupload = /** @class */ (function () {\n            /* @ngInject */\n            Fileupload.$inject = [\"$http\", \"API\"];\n            function Fileupload($http, API) {\n                this.$http = $http;\n                this.API = API;\n                console.log('upload api', API);\n            }\n            /**\n             * upload file directive which send new image to the server\n             * files allowed are only images not pdfs\n             */\n            Fileupload.prototype.upload = function (file) {\n                var _this = this;\n                if (!file)\n                    return;\n                var fd = new FormData();\n                fd.append('file', file);\n                return this.$http({\n                    url: this.API.URL + '/upload',\n                    //  url: 'api/upload',\n                    method: \"POST\",\n                    transformRequest: angular.identity,\n                    data: fd,\n                    headers: {\n                        'Function-Code': 'DFKJ884576*_35465fdjfuyrt+_*45@%_=_*56%@!~^',\n                        'Content-Type': undefined, enctype: 'multipart/form-data'\n                    },\n                }).then(function (response) {\n                    if (response.data.error) {\n                        console.info('File uploaded= ', response.data);\n                        return false;\n                    }\n                    if (response.data.success) {\n                        return response.data.response;\n                    }\n                }, function (err) {\n                    var msg = 'file did not upload';\n                    return _this.fail(err, msg);\n                });\n            };\n            Fileupload.prototype.fail = function (error, msg) {\n                if (msg === void 0) { msg = ''; }\n                if (!msg)\n                    msg = 'server error';\n                return { error: error, message: msg };\n            };\n            return Fileupload;\n        }());\n        fileupload.Fileupload = Fileupload;\n        angular\n            .module('app.fileupload', []);\n        angular\n            .module('app.fileupload')\n            .service('fileupload', Fileupload);\n    })(fileupload = app.fileupload || (app.fileupload = {}));\n})(app || (app = {}));\n"],"file":"fileupload.service.js"}